<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Model Server Front End</title>
  <link href="/static/styles.css" rel="stylesheet">
  <!-- <link href="styles.css" rel="stylesheet"> -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
</head>

<body class="" style="background-color: white; ">
  <div class="top_bar home-page__section--dark-mode">
    <h1 class="heading-1 home-page__heading home-page__search-heading">
      Model Server <strong>Front End</strong>
    </h1>
  </div>
  <main class="image-details" style="background-color: white; ">
    <figure  class="image-details__figure" >
      <div id="image_pane" class="" hidden>
        <span class="concepts-figure">
          <img id="preview" class="concepts-figure__image image-details__image"
            style="background-color: #ccc; border: 1px solid black;" />
          <span id="svgDiv" style="width: 100%; height: 100%" class="concepts-figure__svg image-details__image"></span>
        </span>
      </div>
      <form id="msfe" class="image-details__form">
        <div style="margin: 15px 0">
          <h2 class="h3">Image Details</h2>
          <p><i>Name: <span id="filename"></span></i></p>
          <p><i>File size: <span id="fileSize"></span></i></p>
          <p><i>File type: <span id="fileType"></span></i></p>
        </div>
  
        <label label for="file_upload" style="margin: 15px 0">
          <!-- <span hidden>File Upload:</span> -->
          <div data-v-4cda37d0="" class="v-input theme--light v-text-field v-text-field--is-booted v-file-input">
            <div class="v-input__prepend-outer">
              <div class="v-input__icon v-input__icon--prepend"><button type="button" aria-label="prepend icon"
                  class="v-icon notranslate v-icon--link mdi mdi-paperclip theme--light"></button></div>
            </div>
            <div class="v-input__control">
              <div class="v-input__slot">
                <div class="v-text-field__slot">
                  <!-- <label for="file_upload" class="v-label theme--light" style="left: 0px; right: auto; position: absolute;">File input</label> -->
                  <div id="fileUploadText" class="v-file-input__text">Choose File to Preview</div>
                  <input id="file_upload" type="file">
                </div>
                <div class="v-input__append-inner">
                  <div class="v-input__icon v-input__icon--clear">
                    <button disabled="disabled" type="button" aria-label="clear icon"
                      class="v-icon notranslate v-icon--disabled v-icon--link mdi mdi-close theme--light"></button>
                  </div>
                </div>
              </div>
              <div class="v-text-field__details">
                <div class="v-messages theme--light">
                  <div class="v-messages__wrapper"></div>
                </div>
              </div>
            </div>
          </div>
        </label>
        <div id="hiddenError" style="color: red;" hidden></div>
        <input type="submit" class="button" id="submit" value="Run Algorithm" style="margin: 15px 0" disabled>
      </form>
    </figure>
    
    <div class="image-details__meta-boxes">
      <details data-v-601a8666="" id="localizationBriefs" open="open" class="meta-box image-details__meta-box">
        <summary data-v-601a8666="" class="meta-box__summary" style="display:block;">
          <h3 data-v-601a8666="" id="bounding_box_count" class="meta-box__heading">Results
            <em data-v-601a8666="" id="success" class="text-meta"></em>
          </h3>
          <svg data-v-601a8666="" width="24" height="24" class="icon icon--large meta-box__close-icon">
            <use data-v-601a8666="" xlink:href="#icon-minus"></use>
          </svg>
          <svg data-v-601a8666="" width="24" height="24" class="icon icon--large meta-box__open-icon">
            <use data-v-601a8666="" xlink:href="#icon-plus"></use>
          </svg>

        </summary>
        <ul data-v-601a8666="" id="predictions" class="meta-box__list" style="max-height: unset;">
        </ul>
        <div >
          <button id="downloadResults" hidden class="button">Download results</button>
        </div>
      </details>
    </div>
  </main>
  <script src="/static/scripts/model-server.js"></script>
  <!-- <script src="scripts/model-server.js"></script> -->
  <script type="text/javascript">
    const pageElements = {
      form: document.getElementById("msfe"),
      submitButton : document.getElementById("submit"),
      fileInput : document.getElementById("file_upload"),
      hiddenError : document.getElementById("hiddenError"),
      previewImg : document.getElementById("preview"),
      fileUploadText : document.getElementById("fileUploadText"),
      imagePane : document.getElementById("image_pane"),
      svgDiv : document.getElementById("svgDiv"),
      successEl : document.getElementById("success"),
      predictionsEl : document.getElementById("predictions"),
      filename: document.getElementById("filename"),
      filesize: document.getElementById("fileSize"),
      filetype: document.getElementById("fileType"),
      downloadResults: document.getElementById("downloadResults")
    }    

    // Page listeners
    const msfe = new ModelServerFrontEnd(pageElements);
    document.getElementById("msfe").addEventListener("submit", msfe.validateAndSubmit.bind(this));
    document.getElementById("file_upload").addEventListener("change", msfe.validateAndPreview.bind(this));

  </script>
</body>

</html>